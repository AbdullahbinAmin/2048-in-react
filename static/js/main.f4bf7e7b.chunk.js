(this["webpackJsonp2048-in-react-abdullah"]=this["webpackJsonp2048-in-react-abdullah"]||[]).push([[0],[,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var i=n(1),c=n.n(i),s=n(5),o=n.n(s),a=(n(12),n(0));const r=e=>{let{children:t,onClick:n}=e;return Object(a.jsx)("button",{className:"button",onClick:n,children:t})};var l=n(21),d=n(2);const b=c.a.createContext({containerWidth:0,tileCount:h}),u=e=>{let{children:t,containerWidth:n=0,tileCount:i=h}=e;return Object(a.jsx)(b.Provider,{value:{containerWidth:n,tileCount:i},children:t})},j=()=>{const{containerWidth:e,tileCount:t}=Object(i.useContext)(b);return[e,t]};n(14);const h=4;var O=n(3);n(15);const f=()=>{const[,e]=j();return Object(a.jsx)("div",{className:"grid",children:(()=>{const t=e*e,n=[];for(let e=0;e<t;e+=1)n.push(Object(a.jsx)("div",{className:"grid-cell"},"".concat(e)));return n})()})};var p=n(6);n(16);const v=e=>{let{value:t,position:n,zIndex:c}=e;const[s,o]=j(),[r,l]=Object(i.useState)(1),d=(e=>{const t=Object(i.useRef)();return Object(i.useEffect)((()=>{t.current=e})),t.current})(t),b=n[0]<o&&n[1]<o;Object(p.a)(b,"Tile out of bound");const u=void 0===d||d!==t;Object(i.useEffect)((()=>{u&&(l(1.1),setTimeout((()=>l(1)),100))}),[u,r]);const h=e=>e/o*s,O={top:h(n[1]),left:h(n[0]),transform:"scale(".concat(r,")"),zIndex:c};return Object(a.jsx)("div",{className:"tile tile-".concat(t),style:O,children:t})};n(17);const x=["id"],m=e=>{let{tiles:t,tileCountPerRow:n=h}=e;const i=116*n,c=i+16,s=t.map((e=>{let{id:t}=e,n=Object(O.a)(e,x);return Object(a.jsx)(v,Object(d.a)(Object(d.a)({},n),{},{zIndex:t}),"tile-".concat(t))}));return Object(a.jsx)("div",{className:"board",style:{width:c},children:Object(a.jsxs)(u,{containerWidth:i,tileCount:n,children:[Object(a.jsx)("div",{className:"tile-container",children:s}),Object(a.jsx)(f,{})]})})};let g=1;var E=n(7);const w={tiles:{},byIds:[],hasChanged:!1,inMotion:!1},C=(e,t)=>{switch(t.type){case"CREATE_TILE":return Object(d.a)(Object(d.a)({},e),{},{tiles:Object(d.a)(Object(d.a)({},e.tiles),{},{[t.tile.id]:t.tile}),byIds:[...e.byIds,t.tile.id],hasChanged:!1});case"UPDATE_TILE":return Object(d.a)(Object(d.a)({},e),{},{tiles:Object(d.a)(Object(d.a)({},e.tiles),{},{[t.tile.id]:t.tile}),hasChanged:!0});case"MERGE_TILE":const n=e.tiles,i=t.source.id,c=t.destination.id,{[i]:s,[c]:o}=n,a=Object(O.a)(n,[i,c].map(E.a));return Object(d.a)(Object(d.a)({},e),{},{tiles:Object(d.a)(Object(d.a)({},a),{},{[t.destination.id]:{id:t.destination.id,value:t.source.value+t.destination.value,position:t.destination.position}}),byIds:e.byIds.filter((e=>e!==t.source.id)),hasChanged:!0});case"START_MOVE":return Object(d.a)(Object(d.a)({},e),{},{inMotion:!0});case"END_MOVE":return Object(d.a)(Object(d.a)({},e),{},{inMotion:!1});default:return e}},y=()=>{const e=Object(i.useRef)(!0),[t]=[()=>g++],[n,c]=Object(i.useReducer)(C,w),{tiles:s,byIds:o,hasChanged:a,inMotion:r}=n,l=Object(i.useCallback)((e=>{let{position:n,value:i}=e;const s={id:t(),position:n,value:i};c({type:"CREATE_TILE",tile:s})}),[t]),b=(e,t)=>{setTimeout((()=>((e,t)=>{c({type:"MERGE_TILE",source:e,destination:t})})(e,t)),250)},u=e=>{c({type:"UPDATE_TILE",tile:e})},j=(e,t)=>{const n=e.position[0]!==t.position[0],i=e.position[1]!==t.position[1];return n||i},O=Object(i.useCallback)((()=>{const e=new Array(h*h).fill(0);return o.forEach((t=>{const{position:n}=s[t],i=v(n);e[i]=t})),e}),[o,s]),f=Object(i.useCallback)((()=>O().reduce(((e,t,n)=>0===t?[...e,x(n)]:e),[])),[O]),p=Object(i.useCallback)((()=>{const e=f();if(e.length>0){const t=e[Math.floor(Math.random()*e.length)];l({position:t,value:2})}}),[f,l]),v=e=>e[1]*h+e[0],x=e=>[e%h,Math.floor(e/h)],m=(e,t)=>{c({type:"START_MOVE"});const n=h-1;for(let i=0;i<h;i+=1){const c=e(i);let o,a=0;c.forEach(((e,c)=>{const r=s[e];if(void 0!==o&&o.value===r.value){const e=Object(d.a)(Object(d.a)({},r),{},{position:o.position,mergeWith:o.id});return b(e,o),o=void 0,a+=1,u(e)}const l=Object(d.a)(Object(d.a)({},r),{},{position:x(t(i,c,a,n))});if(o=l,j(r,l))return u(l)}))}setTimeout((()=>c({type:"END_MOVE"})),250)};Object(i.useEffect)((()=>{if(e.current)return l({position:[0,1],value:2}),l({position:[0,2],value:2}),void(e.current=!1);!r&&a&&p()}),[a,r,l,p]);return[o.map((e=>s[e])),m.bind(void 0,(e=>{const t=O();return[t[e*h+0],t[e*h+1],t[e*h+2],t[e*h+3]].filter((e=>0!==e))}),((e,t,n,i)=>e*h+t-n)),m.bind(void 0,(e=>{const t=O();return[t[e*h+0],t[e*h+1],t[e*h+2],t[e*h+3]].filter((e=>0!==e)).reverse()}),((e,t,n,i)=>e*h+i+n-t)),m.bind(void 0,(e=>{const t=O();return[t[e+0*h],t[e+1*h],t[e+2*h],t[e+3*h]].filter((e=>0!==e))}),((e,t,n,i)=>e+h*(t-n))),m.bind(void 0,(e=>{const t=O();return[t[e+0*h],t[e+1*h],t[e+2*h],t[e+3*h]].filter((e=>0!==e)).reverse()}),((e,t,n,i)=>e+h*(i-t+n)))]},T=()=>{const[e,t,n,c,s]=y(),o=Object(l.a)((e=>{switch(e.preventDefault(),e.code){case"ArrowLeft":t();break;case"ArrowRight":n();break;case"ArrowUp":c();break;case"ArrowDown":s()}}),250,{leading:!0,trailing:!1});return Object(i.useEffect)((()=>(window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o)})),[o]),Object(a.jsx)(m,{tiles:e,tileCountPerRow:h})};n(18);const k=()=>{const[e,t]=Object(i.useState)(new Date);return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsxs)("div",{className:"header",children:[Object(a.jsx)("div",{children:Object(a.jsx)("h1",{children:"Play 2048"})}),Object(a.jsx)("div",{children:Object(a.jsx)(r,{onClick:()=>{t(new Date)},children:"Restart"})})]}),Object(a.jsx)(T,{},e.toISOString()),Object(a.jsxs)("div",{children:[Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Wondering how was that built?"})," You can find a video tutorial and code here:"]}),Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:Object(a.jsx)("a",{href:"https://youtu.be/vI0QArPnkUc",target:"_blank",children:"Tutorial (YouTube video)"})}),Object(a.jsx)("li",{children:Object(a.jsx)("a",{href:"https://github.com/mateuszsokola/2048-in-react/",target:"_blank",children:"Source Code (Github)"})}),Object(a.jsx)("li",{children:Object(a.jsx)("a",{href:"https://mateuszsokola.github.io/2048-animation-examples/",target:"_blank",children:"Animation Examples (Github Pages)"})})]}),Object(a.jsxs)("p",{children:["This game (2048) was built using ",Object(a.jsx)("b",{children:"React"})," and ",Object(a.jsx)("b",{children:"TypeScript"}),". The unique part of this example is animations. The animations in React aren't that straightforward, so I hope you can learn something new from it."]})]}),Object(a.jsxs)("div",{className:"footer",children:["Made with \u2764\ufe0f by"," ",Object(a.jsx)("a",{href:"https://www.youtube.com/channel/UCJV16_5c4A0amyBZSI4yP6A",target:"_blank",children:"Matt Sokola"})]})]})};var I=e=>{e&&e instanceof Function&&n.e(3).then(n.bind(null,22)).then((t=>{let{getCLS:n,getFID:i,getFCP:c,getLCP:s,getTTFB:o}=t;n(e),i(e),c(e),s(e),o(e)}))};o.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(k,{})}),document.getElementById("root")),I()}],[[19,1,2]]]);
//# sourceMappingURL=main.f4bf7e7b.chunk.js.map